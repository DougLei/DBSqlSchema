{
	"id":"id1",
	"type":"procedure",
	"description":"",
	"content":{
		"procedureName":"DeleteMaterialinfo",
		"isCover":true,
		"isTransaction":true,
		"parameter":[
			{
				"name":"Ids",
				"dataType":"varchar",
				"length":2500
			},
			{
				"name":"Message",
				"dataType":"varchar",
				"inOut":"out"
			}
		],
		"declare":[
			{
				"name":"tempTable",
				"dataType":"tmp_table",
				"custom":{
					"typeName":"mytmptable",
					"isCreateType":true,			
					"column":[
						{
							"name":"ID",
							"dataType":"varchar",
							"length":50
						}
					]
				}
			},
			{
				"name":"MATERIALNAME",
				"dataType":"varchar",
				"length":20
			}
		],

		"step1":{
			"id":"step1",
			"type":"sql",
			"content":[
				{
					"sqlJson":{
						"id": "id2",
						"type": "insert",
						"content": {
							"paramName":"tempTable",
							"column": [
								"ID"
							],
							"values": {
								"type": "sub_query",
								"sqlJson":{
									"id":"id3",
									"type":"select",
									"content":{
										"resultSet":[
											{
												"columnName":"value"
											}
										],
										"table":{
											"type":"function",
											"function":{
												"name":"F_Split",
												"parameter":[
													{
														"type":"parameter",
														"paramName":"Ids"
													},
													{
														"type":"value",
														"paramName":"','"
													}
												]
											}
										}
									}
								}
							}
						}
					}
				}
			]
		},
		"step2":{
			"id":"step2",
			"type":"set_value",
			"content":[
				{
					"parameter":[
						{
							"isDeclare":false,
							"name":"MATERIALNAME"
						}
					],
					"type":"select_sql",
					"selectSqlJson":{
						"id":"id4",
						"type":"select",
						"content":{
							"resultSet":[
								{
									"function":{
										"name":"STUFF",
										"parameter":[
											{
												"type":"sql",
												"sqlJson":{
													"id":"id5",
													"type":"select",
													"content":{
														"resultSet":[
															{
																"columnName":"value"
															}
														],
														"table":{
															
														}
													}
												}
											},
											{
												"type":"value",
												"paramName":"1"
											},
											{
												"type":"value",
												"paramName":"1"
											},
											{
												"type":"value",
												"paramName":"''"
											}
										]
									}
								}
							]
						}
					}
				}
			]
		},
		"step3":{
			"id":"step3",
			"type":"if_else",
			"if1":{
				"condition":[
					{
						"conditionGroup":[
							{
								"leftType":"function",
								"leftFunction":{
									"name":"count",
									"parameters":[
										{
											"type":"parameter",
											"paramName":"MATERIALNAME"
										}
									]
								},
								"operator":"gt",
								"rightType":"value",
								"rightValue":"0"
							}
						]
					}
				],
				"content":[
					{
						"stepJson":{
							"step4":{
								"id":"step4",
								"type":"set_value",
								"content":[
									{
										"parameter":[
											{
												"isDeclare":false,
												"name":"Message"
											}
										],
										"type":"function",
										"function":{
											"name":"_append",
											"parameters":[
												{
													"type":"value",
													"paramName":"'error:'"
												},
												{
													"type":"parameter",
													"paramName":"MATERIALNAME"
												},
												{
													"type":"value",
													"paramName":"'在启用中，无法删除'"
												}
											]
										}
									}
								]
							}
						}
					}
				]
			},
			"if2":{
				"content":[
					{
						"stepJson":{
							"step5":{
								"type":"set_value",
								"content":[
									{
										"parameter":[
											{
												"isDeclare":false,
												"name":"Message"
											}
										],
										"type":"value",
										"value":"'success:删除成功'"
									}
								]
							}
						}
					},
					{
						"stepJson":{
							"step6":{
								"type":"sql",
								"content":[
									{
										"sqlJson":{
											"type": "delete",
											"content": {
												"tableName": "MDM_MATERIALINFO",
												"where":[
													{
														"whereGroup":[
															{
																"columnName":"ID",
																"operator":"in",
																"value":{
																	"type":"sub_query",
																	"sqlJson": {
																		"type":"select",
																		"content":{
																			"resultSet":[
																				{
																					"columnName":"ID"
																				}
																			],
																			"table":{
																				"type":"parameter",
																				"paramName":"tempTable"
																			}
																		}
																	}
																}
															}
														]
													}
												]
											}
										}
									}
								]
							}
						}
					}
				]
			}		
		}
	}
}